{
  "$order": [
    "cef_ready_handler",
    "cef_after_created_handler",
    "cef_toggle_dev_tools_handler",
    "cef_toggle_webui_handler",
    "cef_click_outside_handler",
    "init_websocket_server_handler",
    "ws_get_ecs_data",
    "init_physics_world_handler",
    "init_physics_body_handler",
    "init_physics_collision_handler",
    "physics_contact_handler",
    "reload_script_handler",
    "build_script_handler",
    "update_script_query",
    "dispatch_broadcast_event_script",
    "dispatch_event_script",
    "process_on_kill_event",
    "load_texture_handler",
    "reg_anim_seq_handler",
    "read_controls",
    "update_enemies_collisions",
    "apply_controls",
    "apply_gravity",
    "apply_jump",
    "update_script",
    "update_active_auto_move",
    "update_always_active_auto_move",
    "update_auto_move_collisions",
    "check_physics_contacts",
    "update_collisions",
    "update_physics_collisions",
    "update_physics",
    "update_kinematic_physics_body",
    "remove_death_fx",
    "update_spawner",
    "update_position",
    "update_position_for_active",
    "validate_position",
    "select_current_anim_frame",
    "select_current_anim_frame_for_player",
    "update_anim_frame",
    "update_camera",
    "update_websocket_server",
    "render_walls",
    "render_normal",
    "render_debug_physics"
  ],
  "$templates$v1": [
    {
      "death_fx": {
        "pos:vec2": [
          0.0,
          0.0
        ],
        "dir:float": 1.0,
        "is_alive:bool": true,
        "alive_timer:timer": {
          "time": 5.0,
          "period": 5.0
        },
        "texture:texture": {
          "path": "../assets/atlas/atlas.png"
        },
        "frame:vec4": [
          368,
          68,
          36,
          28
        ],
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "death"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "death": {
                "fps": 10.0,
                "loop": false,
                "frames": [
                  {
                    "x": 248,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 122,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 206,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 164,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 80,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 38,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  }
                ]
              }
            }
          }
        }
      }
    }
  ],
  "$templates": [
    {
      "$name": "WebUI",
      "$components": {
        "webui": {
          "$type": "tag",
          "$value": {}
        }
      }
    },
    {
      "$name": "server",
      "$components": {
        "ws_server": {
          "$type": "websocket_server",
          "$value": {}
        }
      }
    },
    {
      "$name": "script",
      "$components": {
        "script": {
          "$type": "script",
          "$value": {
            "name": "",
            "path": ""
          }
        }
      }
    },
    {
      "$name": "PhysicsWorld",
      "$components": {
        "phys_world": {
          "$type": "phys_world",
          "$value": {}
        }
      }
    },
    {
      "$name": "death_fx",
      "$components": {
        "pos": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "dir": {
          "$type": "float",
          "$value": 1.0
        },
        "is_alive": {
          "$type": "bool",
          "$value": true
        },
        "alive_timer": {
          "$type": "timer",
          "$value": {
            "time": 5.0,
            "period": 5.0
          }
        },
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas.png"
          }
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            368,
            68,
            36,
            28
          ]
        },
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "death"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "death": {
                "fps": 10.0,
                "loop": false,
                "frames": [
                  {
                    "x": 248,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 122,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 206,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 164,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 80,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 38,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  }
                ]
              }
            }
          }
        }
      }
    },
    {
      "$name": "enemy_spawner",
      "$components": {
        "spawner": {
          "$type": "tag",
          "$value": {}
        },
        "spawn_timer": {
          "$type": "timer",
          "$value": {
            "time": 5.0,
            "period": 5.0
          }
        }
      }
    },
    {
      "$name": "player_spawner",
      "$components": {
        "player_spawner": {
          "$type": "tag",
          "$value": {}
        }
      }
    },
    {
      "$name": "player_spawn_zone",
      "$components": {
        "zone": {
          "$type": "tag",
          "$value": {}
        },
        "player_spawn_zone": {
          "$type": "tag",
          "$value": {}
        },
        "pos": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        }
      }
    },
    {
      "$name": "enemy",
      "$components": {
        "enemy": {
          "$type": "tag",
          "$value": {}
        },
        "pos": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "vel": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "dir": {
          "$type": "float",
          "$value": 1.0
        },
        "is_alive": {
          "$type": "bool",
          "$value": true
        }
      }
    },
    {
      "$name": "opossum",
      "$extends": [
        "enemy"
      ],
      "$components": {
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas.png"
          }
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            368,
            68,
            36,
            28
          ]
        },
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "run"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "run": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 368,
                    "y": 68,
                    "w": 36,
                    "h": 28
                  },
                  {
                    "x": 292,
                    "y": 68,
                    "w": 36,
                    "h": 28
                  },
                  {
                    "x": 330,
                    "y": 68,
                    "w": 36,
                    "h": 28
                  },
                  {
                    "x": 406,
                    "y": 68,
                    "w": 36,
                    "h": 28
                  },
                  {
                    "x": 0,
                    "y": 102,
                    "w": 36,
                    "h": 28
                  },
                  {
                    "x": 444,
                    "y": 68,
                    "w": 36,
                    "h": 28
                  }
                ]
              }
            }
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            32.0,
            20.0
          ]
        }
      }
    },
    {
      "$name": "eagle",
      "$extends": [
        "enemy"
      ],
      "$components": {
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas.png"
          }
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            368,
            68,
            36,
            28
          ]
        },
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "run"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "run": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 332,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 416,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 374,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  },
                  {
                    "x": 290,
                    "y": 102,
                    "w": 40,
                    "h": 41
                  }
                ]
              }
            }
          }
        },
        "auto_move": {
          "$type": "auto_move",
          "$value": {
            "duration": 2.0,
            "length": 64,
            "jump": false
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            32.0,
            20.0
          ]
        }
      }
    },
    {
      "$name": "frog",
      "$extends": [
        "enemy"
      ],
      "$components": {
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas.png"
          }
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            0,
            0,
            0,
            0
          ]
        },
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "idle"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "idle": {
                "fps": 8.0,
                "loop": true,
                "frames": [
                  {
                    "x": 181,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  },
                  {
                    "x": 255,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  },
                  {
                    "x": 144,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  },
                  {
                    "x": 107,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  }
                ]
              },
              "jump": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 218,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  }
                ]
              },
              "fall": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 70,
                    "y": 68,
                    "w": 35,
                    "h": 32
                  }
                ]
              }
            }
          }
        },
        "dir": {
          "$type": "float",
          "$value": -1.0
        },
        "is_on_ground": {
          "$type": "bool",
          "$value": true
        },
        "jump": {
          "$type": "jump",
          "$value": {
            "height": 15.0,
            "duration": 0.1
          }
        },
        "gravity": {
          "$type": "gravity",
          "$value": {
            "mass": 25.0
          }
        },
        "auto_move": {
          "$type": "auto_move",
          "$value": {
            "duration": 2.0,
            "length": 64,
            "jump": true
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            -5.0,
            35.0,
            32.0
          ]
        }
      }
    },
    {
      "$name": "fox",
      "$components": {
        "hud": {
          "$type": "hud",
          "$value": {}
        },
        "enemy_eid": {
          "$type": "eid",
          "$value": 0
        },
        "user_input": {
          "$type": "user_input",
          "$value": {}
        },
        "gravity": {
          "$type": "gravity",
          "$value": {
            "mass": 25.0
          }
        },
        "jump": {
          "$type": "jump",
          "$value": {
            "height": 25.0,
            "duration": 0.1
          }
        },
        "pos": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "vel": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "size": [
                20.0,
                32.0
              ],
              "center": [
                16.0,
                16.0
              ],
              "angle": 0.0,
              "material": {
                "density": 1.0,
                "friction": 0.5
              }
            }
          ]
        },
        "phys_body": {
          "$type": "phys_body",
          "$value": {
            "type": "dynamic"
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            6.0,
            0.0,
            20.0,
            32.0
          ]
        },
        "dir": {
          "$type": "float",
          "$value": 1.0
        },
        "is_alive": {
          "$type": "bool",
          "$value": true
        },
        "is_on_ground": {
          "$type": "bool",
          "$value": true
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            0.0,
            0.0
          ]
        },
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas.png"
          }
        },
        "anim_state": {
          "$type": "anim_state",
          "$value": {
            "node": "idle"
          }
        },
        "anim_graph": {
          "$type": "anim_graph",
          "$value": {
            "nodes": {
              "idle": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 105,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 350,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 452,
                    "y": 0,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 315,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  }
                ]
              },
              "run": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 385,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 35,
                    "y": 68,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 0,
                    "y": 68,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 420,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 455,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  },
                  {
                    "x": 417,
                    "y": 0,
                    "w": 33,
                    "h": 32
                  }
                ]
              },
              "jump": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 35,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  }
                ]
              },
              "fall": {
                "fps": 10.0,
                "loop": true,
                "frames": [
                  {
                    "x": 0,
                    "y": 34,
                    "w": 33,
                    "h": 32
                  }
                ]
              }
            }
          }
        }
      }
    },
    {
      "$name": "base-block",
      "$components": {
        "wall": {
          "$type": "tag",
          "$value": {}
        },
        "pos": {
          "$type": "vec2",
          "$value": [
            0.0,
            0.0
          ]
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "size": [
                32.0,
                32.0
              ],
              "center": [
                16.0,
                16.0
              ],
              "angle": 0.0,
              "material": {
                "density": 1.0,
                "friction": 0.5
              }
            }
          ]
        },
        "phys_body": {
          "$type": "phys_body",
          "$value": {
            "type": "static"
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            32.0,
            32.0
          ]
        },
        "dir": {
          "$type": "float",
          "$value": 1.0
        },
        "is_alive": {
          "$type": "bool",
          "$value": true
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            0,
            0,
            0,
            0
          ]
        }
      }
    },
    {
      "$name": "base-textured-block",
      "$extends": [
        "base-block"
      ],
      "$components": {
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/atlas/atlas-props.png"
          }
        }
      }
    },
    {
      "$name": "block-big",
      "$extends": [
        "base-textured-block"
      ],
      "$components": {
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            32.0,
            32.0
          ]
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            2,
            93,
            32,
            32
          ]
        }
      }
    },
    {
      "$name": "block-big-moving",
      "$extends": [
        "block-big"
      ],
      "$components": {
        "lift": {
          "$type": "tag",
          "$value": {}
        },
        "vel": {
          "$type": "vec2",
          "$value": [
            0.0,
            -1.0
          ]
        },
        "is_active": {
          "$type": "bool",
          "$value": true
        },
        "key": {
          "$type": "hash_string",
          "$value": ""
        },
        "auto_move": {
          "$type": "auto_move",
          "$value": {
            "duration": 2.0,
            "length": 64,
            "jump": false
          }
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "size": [
                32.0,
                32.0
              ],
              "center": [
                16.0,
                16.0
              ],
              "angle": 0.0,
              "material": {
                "density": 1.0,
                "friction": 0.5
              }
            },
            {
              "type": "box",
              "isSensor": true,
              "size": [
                24.0,
                10.0
              ],
              "center": [
                16.0,
                -5.0
              ],
              "angle": 0.0,
              "material": {
                "density": 0.0,
                "friction": 0.0
              }
            }
          ]
        },
        "phys_body": {
          "$type": "phys_body",
          "$value": {
            "type": "kinematic"
          }
        }
      }
    },
    {
      "$name": "block",
      "$extends": [
        "base-textured-block"
      ],
      "$components": {
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            16.0,
            16.0
          ]
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "size": [
                16.0,
                16.0
              ],
              "center": [
                8.0,
                8.0
              ],
              "angle": 0.0,
              "material": {
                "density": 1.0,
                "friction": 0.5
              }
            }
          ]
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            84,
            19,
            16,
            16
          ]
        }
      }
    },
    {
      "$name": "ground-block",
      "$extends": [
        "base-textured-block"
      ],
      "$components": {
        "texture": {
          "$type": "texture",
          "$value": {
            "path": "../assets/environment/tileset.png"
          }
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            16.0,
            16.0
          ]
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "size": [
                16.0,
                16.0
              ],
              "center": [
                8.0,
                8.0
              ],
              "angle": 0.0,
              "material": {
                "density": 1.0,
                "friction": 0.5
              }
            }
          ]
        },
        "frame": {
          "$type": "vec4",
          "$value": [
            16,
            16,
            16,
            16
          ]
        }
      }
    },
    {
      "$name": "trigger",
      "$components": {
        "trigger": {
          "$type": "tag",
          "$value": {}
        },
        "key": {
          "$type": "hash_string",
          "$value": ""
        },
        "is_binded": {
          "$type": "bool",
          "$value": false
        },
        "is_active": {
          "$type": "bool",
          "$value": false
        },
        "action_eid": {
          "$type": "eid",
          "$value": 0
        }
      }
    },
    {
      "$name": "switch-trigger",
      "$extends": [
        "trigger"
      ],
      "$components": {
        "switch_trigger": {
          "$type": "tag",
          "$value": {}
        },
        "action_key": {
          "$type": "hash_string",
          "$value": ""
        },
        "pos": {
          "$type": "vec2",
          "$value": [0, 0]
        },
        "collision_shape": {
          "$type": "collision_shape",
          "$value": [
            {
              "type": "box",
              "isSensor": true,
              "size": [
                32.0,
                32.0
              ],
              "center": [
                16.0,
                16.0
              ],
              "angle": 0.0,
              "material": {
                "density": 0.0,
                "friction": 0.0
              }
            }
          ]
        },
        "phys_body": {
          "$type": "phys_body",
          "$value": {
            "type": "static"
          }
        }
      }
    },
    {
      "$name": "zone-trigger",
      "$extends": [
        "trigger"
      ],
      "$components": {
        "zone_trigger": {
          "$type": "tag",
          "$value": {}
        },
        "action_key": {
          "$type": "hash_string",
          "$value": ""
        },
        "pos": {
          "$type": "vec2",
          "$value": [0, 0]
        },
        "collision_rect": {
          "$type": "vec4",
          "$value": [
            0.0,
            0.0,
            32.0,
            20.0
          ]
        }
      }
    },
    {
      "$name": "action",
      "$components": {
        "action": {
          "$type": "tag",
          "$value": {}
        },
        "key": {
          "$type": "hash_string",
          "$value": ""
        },
        "is_active": {
          "$type": "bool",
          "$value": false
        }
      }
    },
    {
      "$name": "enable-lift-action",
      "$extends": [
        "action"
      ],
      "$components": {
        "enable_lift_action": {
          "$type": "tag",
          "$value": {}
        },
        "lift_key": {
          "$type": "hash_string",
          "$value": ""
        }
      }
    },
    {
      "$name": "kill-player-action",
      "$extends": [
        "action"
      ],
      "$components": {
        "kill_player_action": {
          "$type": "tag",
          "$value": {}
        }
      }
    }
  ]
}